<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Prote√ß√£o Digital ‚Äî Prot√≥tipo (One-file, Corporativo Moderno) + Login</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#f5f7fb; --card:#ffffff; --primary:#0f4bd8; --primary-600:#0b3fb0; --muted:#6b7a90;
    --accent:#2db6ff; --danger:#e74c3c; --radius:12px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;
    background: linear-gradient(180deg,var(--bg) 0%, #eef3fb 100%);color:#223;
    -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
  }

  /* HEADER FIXO */
  header{position:fixed;left:0;right:0;top:0;height:72px;display:flex;align-items:center;justify-content:space-between;padding:0 20px;gap:16px;background:linear-gradient(90deg,var(--primary),var(--primary-600));color:white;box-shadow:0 6px 18px rgba(15,75,216,0.16);z-index:50;}
  .brand{display:flex;gap:12px;align-items:center}
  .logo{width:44px;height:44px;border-radius:10px;display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,0.12);font-weight:800;}
  #logo-wbp{
    height: 99.9%;
    border-radius: 20%;
  }
  .brand h1{font-size:1.05rem;margin:0;font-weight:700}
  nav.top{display:flex;gap:8px;align-items:center}
  nav.top button{background:transparent;border:0;color:rgba(255,255,255,0.95);padding:8px 12px;border-radius:10px;font-weight:600;cursor:pointer;transition:all .18s;}
  nav.top button[aria-current="true"]{background:rgba(255,255,255,0.12);backdrop-filter:blur(4px)}
  nav.top button:hover{transform:translateY(-2px);opacity:.95}
  .user-area{display:flex;gap:10px;align-items:center;font-weight:600}

  /* MAIN */
  main{padding:92px 20px 28px;max-width:1200px;margin:0 auto;min-height:calc(100vh - 100px);}
  .page-frame{background:var(--card);border-radius:var(--radius);padding:20px;box-shadow:0 8px 30px rgba(23,42,77,0.06);min-height:calc(100vh - 160px);overflow:hidden;position:relative;}

  /* PAGES */
  .page{position:absolute;inset:20px;overflow:auto;padding:8px;display:flex;flex-direction:column;gap:16px;opacity:0;transform:translateY(8px);pointer-events:none;transition:opacity .28s ease, transform .28s ease;}
  .page.active{opacity:1;transform:none;pointer-events:auto;}

  /* content styles (kept from before) */
  .hero{flex:1;padding:18px;border-radius:10px;background:linear-gradient(180deg,#f8fbff,#ffffff);}
  .btn{background:var(--primary);color:#fff;padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:700}
  .btn.ghost{background:transparent;border:1px solid #e6eefc;color:var(--primary);font-weight:700}
  .input,.textarea{padding:12px;border-radius:10px;border:1px solid #e6eefc;font-size:0.98rem}
  .card{padding:12px;border-radius:10px;border:1px solid #eef5ff;background:white}
  .hint{color:var(--muted);font-size:0.92rem}

  /* community */
  .community-wrap{display:grid;grid-template-columns:1fr 340px;gap:18px;height:100%}
  .composer{padding:12px;border-radius:10px;border:1px solid #e9f2ff;background:linear-gradient(180deg,#ffffff,#fbfdff)}
  .composer input,.composer textarea,.composer select{width:100%;padding:10px;border-radius:8px;border:1px solid #e6eefc}
  .composer textarea{resize:vertical;min-height:90px}
  .feed{display:flex;flex-direction:column;gap:12px;overflow:auto;padding:6px}
  .post{display:flex;gap:12px;padding:12px;border-radius:10px;border:1px solid #eef5ff;background:white;align-items:flex-start}
  .avatar{width:50px;height:50px;border-radius:10px;background:linear-gradient(180deg,var(--accent),#6ec8ff);display:flex;align-items:center;justify-content:center;color:#023046;font-weight:800}
  .meta{display:flex;gap:8px;align-items:center;margin-bottom:6px}
  .badge{font-size:0.80rem;padding:6px 10px;border-radius:999px;background:#eef7ff;border:1px solid #d6eaff;color:var(--primary);font-weight:700}
  .post-actions{display:flex;gap:8px;margin-top:8px;align-items:center}
  .chip{padding:6px 10px;border-radius:999px;border:1px solid #eef4ff;background:#fbfeff;font-weight:700;cursor:pointer}

  footer{margin-top:14px;text-align:center;color:var(--muted);font-size:0.92rem}

  /* LOGIN OVERLAY */
  .login-overlay{position:fixed;inset:0;background:linear-gradient(180deg,rgba(2,16,52,0.55),rgba(2,16,52,0.65));display:flex;align-items:center;justify-content:center;z-index:9999}
  .login-box{width:420px;max-width:92%;background:linear-gradient(180deg,#ffffff,#f7fbff);padding:20px;border-radius:14px;box-shadow:0 18px 60px rgba(2,16,52,0.5);border:1px solid rgba(255,255,255,0.6)}
  .login-box h2{margin:0 0 6px 0;color:var(--primary)}
  .login-box .small{color:var(--muted);font-size:0.94rem;margin-bottom:12px}
  .login-box input{width:100%;padding:12px;margin-top:8px;border-radius:10px;border:1px solid #e6eefc}
  .login-row{display:flex;gap:8px;margin-top:12px}
  .login-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:16px}
  .link-like{background:transparent;border:0;color:var(--primary);cursor:pointer;font-weight:700}

  @media (max-width:980px){.community-wrap{grid-template-columns:1fr} main{padding:92px 14px 28px}}
</style>
</head>
<body>

<header>
  <div class="brand">
    <div class="logo"><img id="logo-wbp" src="Design sem nome(1).jpg" alt=""></div>
    <div>
      <h1>Prote√ß√£o <strong style="color:rgba(255,255,255,0.95)">Digital</strong></h1>
      <div style="font-size:0.8rem;color:rgba(255,255,255,0.9);margin-top:2px">Prot√≥tipo</div>
    </div>
  </div>

  <nav class="top" role="navigation" aria-label="Principal">
    <button onclick="go('home')" id="nav-home" aria-current="true">Home</button>
    <button onclick="go('vazamento')" id="nav-vazamento">Vazamento</button>
    <button onclick="go('alertas')" id="nav-alertas">Alertas</button>
    <button onclick="go('guia')" id="nav-guia">Guia (Comunidade)</button>
  </nav>

  <div class="user-area" id="userArea">
    <!-- preenchido por JS -->
  </div>
</header>

<main>
  <div class="page-frame" role="main" aria-live="polite">
    <!-- HOME -->
    <section id="home" class="page active" aria-label="Home">
      <div class="hero">
        <h2 style="margin:0 0 6px 0;color:var(--primary)">Seguran√ßa Online ao Seu Alcance</h2>
        <p class="hint">Conte√∫do pr√°tico, alertas e uma comunidade simulada pra compartilhar golpes e dicas. Navegue nas abas acima.</p>
        <div style="margin-top:12px;display:flex;gap:12px">
          <button class="btn" onclick="go('guia')">Entrar na Comunidade</button>
          <button class="btn ghost" onclick="go('alertas')">Ver Alertas</button>
        </div>
      </div>

      <div style="display:flex;gap:12px;margin-top:16px;flex-wrap:wrap">
        <div style="flex:1;min-width:240px" class="card">
          <strong>üîç Ferramentas</strong>
          <p class="hint" style="margin-top:8px">Verifique vazamentos simulados e receba dicas r√°pidas.</p>
          <div style="margin-top:8px;display:flex;gap:8px">
            <button class="btn ghost" onclick="go('vazamento')">Verificar Vazamento</button>
            <button class="btn" onclick="go('guia')">Ir para Guia</button>
          </div>
        </div>
        <div style="width:320px" class="card">
          <strong>üìå √öltimos alertas</strong>
          <ul style="margin-top:8px;padding-left:18px;color:var(--muted)">
            <li>[12/08/2025] Golpe do PIX falso no WhatsApp</li>
            <li>[10/08/2025] Boletos falsos por e-mail</li>
            <li>[07/08/2025] Sites falsos de lojas</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- VAZAMENTO -->
    <section id="vazamento" class="page" aria-label="Vazamento">
      <h2 style="color:var(--primary)">üîç Verificar Vazamento de Dados</h2>
      <p class="hint">Digite um e-mail ou CPF para simular a verifica√ß√£o (simula√ß√£o local).</p>
      <div class="vazamento">
        <div class="form">
          <input id="inputDados" class="input" placeholder="seu@exemplo.com ou 000.000.000-00" />
          <div style="display:flex;gap:10px;margin-top:8px">
            <button class="btn" onclick="simularVazamento()">Verificar</button>
            <button class="btn ghost" onclick="document.getElementById('inputDados').value='';">Limpar</button>
          </div>
          <div id="vazResultado" class="card" style="margin-top:12px;display:none"></div>
        </div>
      </div>
    </section>

    <!-- ALERTAS -->
    <section id="alertas" class="page" aria-label="Alertas">
      <h2 style="color:var(--primary)">üö® Alertas de Golpes Recentes</h2>
      <div class="alerts-list">
        <div class="card alert-item"><strong>[12/08/2025]</strong> Golpe do PIX falso circulando por WhatsApp ‚Äî verifique sempre a origem.</div>
        <div class="card alert-item"><strong>[10/08/2025]</strong> Falsos boletos banc√°rios enviados por e-mail. Confira o c√≥digo do benefici√°rio.</div>
        <div class="card alert-item"><strong>[07/08/2025]</strong> Sites falsos imitam lojas famosas ‚Äî cheque certificado SSL e dom√≠nio.</div>
      </div>
    </section>

    <!-- GUIA / COMUNIDADE -->
    <section id="guia" class="page" aria-label="Guia Comunidade">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <h2 style="color:var(--primary);margin:0">üìò Guia ‚Äî Comunidade (Simula√ß√£o)</h2>
        <div style="color:var(--muted)">Posts salvos localmente no navegador</div>
      </div>

      <div class="community-wrap" role="region" aria-label="Comunidade">
        <div style="display:flex;flex-direction:column;gap:12px;min-height:0">
          <div class="composer card" aria-label="Composer">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <strong>üì£ Novo post (simula√ß√£o)</strong>
              <div style="font-size:0.92rem;color:var(--muted)">Role: escolha Moderador p/ aviso oficial</div>
            </div>
            <div class="row" style="margin-top:8px">
              <select id="postRole" style="width:160px">
                <option value="user">Usu√°rio</option>
                <option value="moderator">Moderador</option>
              </select>
              <input id="postName" placeholder="Seu nome (ex: Maria, Mod_Joao)" />
            </div>
            <textarea id="postText" placeholder="Relate um golpe, dica ou marque com #golpe" style="margin-top:8px"></textarea>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
              <div style="display:flex;gap:8px">
                <button class="chip" onclick="insertTag('#golpe')">#golpe</button>
                <button class="chip" onclick="insertTag('#dica')">#dica</button>
              </div>
              <div>
                <button class="btn" onclick="createPost()">Publicar</button>
                <button class="btn ghost" onclick="clearComposer()">Limpar</button>
              </div>
            </div>
          </div>

          <div style="display:flex;gap:8px;align-items:center">
            <div class="chip" onclick="setFilter('all')" id="filter-all">Todas</div>
            <div class="chip" onclick="setFilter('golpe')" id="filter-golpe">#golpe</div>
            <div class="chip" onclick="setFilter('dica')" id="filter-dica">#dica</div>
            <div class="chip" onclick="setFilter('moderator')" id="filter-mod">Mod</div>
            <div style="margin-left:auto;color:var(--muted)">Filtro: <span id="activeFilterText">Todas</span></div>
          </div>

          <div id="feed" class="feed" aria-live="polite"></div>
        </div>

        <!-- SIDEBAR -->
        <aside class="sidebar" aria-label="Barra lateral">
          <div class="card">
            <strong>üîé Buscar</strong>
            <div style="margin-top:8px;display:flex;gap:8px">
              <input id="searchInput" placeholder="Pesquisar posts, tags, nomes" style="padding:10px;border-radius:8px;border:1px solid #e9f2ff" oninput="renderFeed()" />
              <button class="btn ghost" onclick="document.getElementById('searchInput').value='';renderFeed();">Limpar</button>
            </div>
          </div>

          <div class="card">
            <strong>‚ö†Ô∏è Boas pr√°ticas</strong>
            <ol style="margin-top:8px;padding-left:18px;color:var(--muted)">
              <li>Cheque a fonte antes de clicar.</li>
              <li>Nunca compartilhe c√≥digos de 2FA ou senhas.</li>
              <li>Desconfie de solicita√ß√µes urgentes e links encurtados.</li>
            </ol>
          </div>

          <div class="card">
            <strong>üìå Sobre o simulador</strong>
            <p style="margin-top:8px;color:var(--muted)">Posts s√£o simulados e salvos no localStorage. Moderadores podem destacar avisos. Excluir/editar √© permitido via menu (simula√ß√£o).</p>
          </div>
        </aside>
      </div>
    </section>

  </div>

  <footer>
    &copy; 2025 Prote√ß√£o Digital ‚Äî Prot√≥tipo
  </footer>
</main>

<!-- LOGIN OVERLAY (aparece se n√£o autenticado) -->
<div id="loginOverlay" class="login-overlay" style="display:none">
  <div class="login-box" role="dialog" aria-modal="true" aria-labelledby="loginTitle">
    <h2 id="loginTitle">Acesse sua conta</h2>
    <div class="small">Login simulado ‚Äî digite nome e qualquer senha para entrar.</div>

    <label for="loginName" style="font-weight:700">Nome</label>
    <input id="loginName" placeholder="Ex: Joao, Maria" autocomplete="username">

    <label for="loginPass" style="font-weight:700;margin-top:8px;display:block">Senha</label>
    <input id="loginPass" type="password" placeholder="Qualquer senha serve" autocomplete="current-password">

    <div class="login-row">
      <label style="display:flex;align-items:center;gap:8px"><input type="checkbox" id="rememberMe"> Lembrar nesta sess√£o</label>
      <button class="link-like" onclick="showGuestInfo()" style="margin-left:auto">Entrar como visitante</button>
    </div>

    <div class="login-actions">
      <button class="btn ghost" onclick="fillExample()">Exemplo</button>
      <button class="btn" onclick="doLogin()">Entrar</button>
    </div>
    <div style="margin-top:10px;color:var(--muted);font-size:0.9rem">Privacidade: senha n√£o √© enviada a servidor. Login apenas simulado localmente.</div>
  </div>
</div>

<script>
/* --------------- Autentica√ß√£o simulada --------------- */
/* Behavior:
   - Se sessionStorage.pd_user existir -> site aberto
   - Sen√£o: mostrar overlay de login que bloqueia o site
   - Ao logar, salvar sessionStorage.pd_user = nome (ou se "Lembrar nesta sess√£o" marcar)
   - Logout remove sessionStorage e volta ao overlay
*/

const userArea = document.getElementById('userArea');
const loginOverlay = document.getElementById('loginOverlay');

function showLoginOverlay(show = true){
  loginOverlay.style.display = show ? 'flex' : 'none';
  // impedir scroll do body quando overlay ativo
  document.body.style.overflow = show ? 'hidden' : '';
}

// monta a √°rea do user no header (nome + logout)
function renderUserArea(){
  const user = sessionStorage.getItem('pd_user');
  if(user){
    userArea.innerHTML = `<div style="font-size:0.95rem">Ol√°, <strong>${escapeHtml(user)}</strong></div>
                          <button class="btn ghost" style="padding:8px 10px" onclick="logout()">Sair</button>`;
  } else {
    userArea.innerHTML = `<button class="btn ghost" onclick="triggerLogin()">Entrar</button>`;
  }
}

// chamada para mostrar login (quando clica no bot√£o Entrar do header)
function triggerLogin(){
  showLoginOverlay(true);
  document.getElementById('loginName').focus();
}

/* efetua o login simulado */
function doLogin(){
  const name = document.getElementById('loginName').value.trim();
  const pass = document.getElementById('loginPass').value;
  if(!name){
    alert('Digite seu nome.');
    document.getElementById('loginName').focus();
    return;
  }
  // senha pode ser qualquer ‚Äî s√≥ checamos n√£o-vazio pra evitar entrar sem querer
  if(!pass){
    if(!confirm('Senha vazia. Continuar mesmo assim?')) return;
  }
  // salvar nome na sess√£o (n√£o armazenamos senha)
  sessionStorage.setItem('pd_user', name);
  renderUserArea();
  showLoginOverlay(false);
  // pode redirecionar para home ou foro
  go('home');
}

/* logout */
function logout(){
  sessionStorage.removeItem('pd_user');
  renderUserArea();
  // volta ao overlay de login
  showLoginOverlay(true);
  // opcional: limpar algumas coisas
  //document.getElementById('searchInput').value = '';
}

/* preencher campos de exemplo */
function fillExample(){
  document.getElementById('loginName').value = 'Visitante';
  document.getElementById('loginPass').value = '1234';
  document.getElementById('rememberMe').checked = true;
}

/* Info: entrar como visitante sem dados */
function showGuestInfo(){
  if(confirm('Entrar como visitante (nome: Visitante)?')){
    document.getElementById('loginName').value = 'Visitante';
    document.getElementById('loginPass').value = 'visit';
    doLogin();
  }
}

/* Inicializa UI de login se n√£o autenticado */
window.addEventListener('load', ()=>{
  renderUserArea();
  const user = sessionStorage.getItem('pd_user');
  if(!user){
    showLoginOverlay(true);
  } else {
    showLoginOverlay(false);
  }
});

/* --------------- Navega√ß√£o SPA (mantive do c√≥digo anterior) --------------- */
const pages = ['home','vazamento','alertas','guia'];
function go(page){
  pages.forEach(p=>document.getElementById('nav-'+p).setAttribute('aria-current','false'));
  document.getElementById('nav-'+page).setAttribute('aria-current','true');
  pages.forEach(p=>{
    const el = document.getElementById(p);
    if(el){ el.classList.remove('active'); el.scrollTop = 0; }
  });
  document.getElementById(page).classList.add('active');
  if(page==='guia'){ document.getElementById('searchInput')?.focus(); renderFeed(); }
}

/* ---------------- Simula√ß√£o Vazamento / Feed (mesmo comportamento anterior) ---------------- */
function simularVazamento(){
  const v = document.getElementById('inputDados').value.trim();
  const out = document.getElementById('vazResultado');
  if(!v){ alert('Digite um e-mail ou CPF pra verificar.'); return; }
  out.style.display = 'block';
  out.innerHTML = `<strong>Resultado (simulado)</strong><p style="margin-top:8px;color:var(--muted)">Foram encontradas 2 ocorr√™ncias relacionadas a <em>${escapeHtml(v)}</em>:</p>
    <ul style="margin-top:8px;padding-left:18px;color:var(--muted)"><li>LojaX ‚Äî 2023</li><li>RedeY ‚Äî 2021</li></ul>
    <div style="margin-top:8px"><button class="btn ghost" onclick="out.style.display='none'">Fechar</button></div>`;
}

/* Feed localStorage (igual ao c√≥digo anterior) */
const STORAGE_KEY = 'prot_digital_posts_v2';
let posts = [];
let activeFilter = 'all';
function genId(){ return 'p_'+Math.random().toString(36).slice(2,9); }
function loadPosts(){ const raw = localStorage.getItem(STORAGE_KEY); try{ posts = raw?JSON.parse(raw):[] }catch(e){posts=[]} 
  if(!posts || posts.length===0){ posts = [
    {id:genId(), name:'Mod_Joao', role:'moderator', time:'2025-10-01 09:12', text:'Aten√ß√£o: falso site de loja pedindo CPF + 6 d√≠gitos. N√£o informe. #golpe', likes:5},
    {id:genId(), name:'Ana', role:'user', time:'2025-10-02 14:05', text:'Recebi PIX pedindo comprovante via link. Era golpe ‚Äî link estranho. #golpe #dica', likes:2},
    {id:genId(), name:'Lucas', role:'user', time:'2025-09-29 20:33', text:'Dica: verifique sempre o dom√≠nio e use extens√£o de seguran√ßa. #dica', likes:3}
  ]; savePosts(); }
  renderFeed();
}
function savePosts(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(posts)); }
function createPost(){
  const nameInput = document.getElementById('postName').value.trim();
  const name = nameInput || sessionStorage.getItem('pd_user') || 'An√¥nimo';
  const role = document.getElementById('postRole').value;
  const text = document.getElementById('postText').value.trim();
  if(!text){ alert('Escreva algo antes de publicar.'); return; }
  const now = new Date();
  const time = now.getFullYear()+'-'+String(now.getMonth()+1).padStart(2,'0')+'-'+String(now.getDate()).padStart(2,'0')+' '+String(now.getHours()).padStart(2,'0')+':'+String(now.getMinutes()).padStart(2,'0');
  posts.unshift({id:genId(), name, role, time, text, likes:0});
  savePosts(); clearComposer(); renderFeed();
}
function clearComposer(){ document.getElementById('postText').value=''; document.getElementById('postName').value=''; document.getElementById('postRole').value='user'; }
function insertTag(tag){ const t = document.getElementById('postText'); t.value = t.value ? (t.value + ' ' + tag) : tag; t.focus(); }
function renderFeed(){
  const container = document.getElementById('feed'); container.innerHTML = '';
  const q = (document.getElementById('searchInput')?.value || '').trim().toLowerCase();
  const filtered = posts.filter(p=>{
    if(activeFilter==='golpe' && !p.text.toLowerCase().includes('#golpe')) return false;
    if(activeFilter==='dica' && !p.text.toLowerCase().includes('#dica')) return false;
    if(activeFilter==='moderator' && p.role!=='moderator') return false;
    if(q){ return p.text.toLowerCase().includes(q) || p.name.toLowerCase().includes(q); }
    return true;
  });

  if(filtered.length===0){ const empty = document.createElement('div'); empty.className='card'; empty.textContent='Nenhum post encontrado ‚Äî seja o 1¬∫ a publicar!'; container.appendChild(empty); return; }

  filtered.forEach(p=>{
    const el = document.createElement('div'); el.className='post';
    const av = document.createElement('div'); av.className='avatar'; av.textContent = p.name.split(' ')[0].slice(0,2).toUpperCase();
    if(p.role==='moderator'){ av.style.background = 'linear-gradient(180deg,#ffd1d1,#ff7675)'; }
    const body = document.createElement('div'); body.className='post-body';
    const meta = document.createElement('div'); meta.className='meta';
    const nameEl = document.createElement('div'); nameEl.innerHTML = `<strong>${escapeHtml(p.name)}</strong>`;
    const badge = document.createElement('div'); badge.className='badge'; badge.textContent = p.role==='moderator' ? 'Moderador' : 'Usu√°rio';
    if(p.role==='moderator'){ badge.style.background='#fff3f3'; badge.style.color='var(--danger)'; badge.style.border='1px solid rgba(231,76,60,0.08)'; }
    const time = document.createElement('div'); time.style.color='var(--muted)'; time.style.fontSize='0.9rem'; time.textContent = p.time;
    meta.appendChild(nameEl); meta.appendChild(badge); meta.appendChild(time);

    const content = document.createElement('div'); content.className='post-content'; content.textContent = p.text;
    const actions = document.createElement('div'); actions.className='post-actions';
    const like = document.createElement('button'); like.className='btn ghost'; like.style.padding='6px 10px'; like.textContent = `‚ù§Ô∏è ${p.likes}`; like.onclick = ()=>{ p.likes++; savePosts(); renderFeed(); };
    const report = document.createElement('button'); report.className='btn ghost'; report.style.padding='6px 10px'; report.textContent='Reportar'; report.onclick = ()=>{ alert('(Simula√ß√£o) Relat√≥rio enviado.'); };
    const more = document.createElement('button'); more.className='btn ghost'; more.style.padding='6px 10px'; more.textContent='‚ãØ'; more.onclick = ()=>{
      const action = prompt('Digite: d (deletar) | e (editar) ‚Äî simulado');
      if(!action) return;
      if(action.toLowerCase()==='d'){ if(p.role==='moderator' || confirm('Tem certeza que deseja deletar este post?')){ posts = posts.filter(x=>x.id!==p.id); savePosts(); renderFeed(); } }
      if(action.toLowerCase()==='e'){ const txt = prompt('Editar texto:', p.text); if(txt!==null){ p.text = txt; savePosts(); renderFeed(); } }
    };
    actions.appendChild(like); actions.appendChild(report); actions.appendChild(more);

    body.appendChild(meta); body.appendChild(content); body.appendChild(actions);
    el.appendChild(av); el.appendChild(body);
    container.appendChild(el);
  });
}

function setFilter(f){
  activeFilter = f;
  const map = {all:'Todas', golpe:'#golpe', dica:'#dica', moderator:'Mod'};
  document.getElementById('activeFilterText').textContent = map[f] || f;
  document.querySelectorAll('.chip').forEach(c=> c.style.border = c.textContent.toLowerCase().includes(map[f].toLowerCase()) ? '1px solid var(--primary)' : '1px solid #eef4ff');
  renderFeed();
}

function escapeHtml(s){ return String(s).replace(/[&<>"']/g, c=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

/* init */
loadPosts();
setFilter('all');

/* optional: navigation via hash */
window.addEventListener('load', ()=>{
  const h = location.hash.replace('#','');
  if(h && pages.includes(h)) go(h);
});
window.addEventListener('hashchange', ()=>{ const h = location.hash.replace('#',''); if(h && pages.includes(h)) go(h); });
</script>
</body>
</html>
